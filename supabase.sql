-- Criar tabela de produtos para flashcards
CREATE TABLE IF NOT EXISTS flashcard_products (
  id INTEGER PRIMARY KEY,
  code TEXT NOT NULL,
  name TEXT NOT NULL,
  created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
  updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);

-- Criar índice único apenas no ID (código pode ser duplicado se necessário)
CREATE UNIQUE INDEX IF NOT EXISTS flashcard_products_id_unique ON flashcard_products(id);

-- Inserir todos os produtos existentes
INSERT INTO flashcard_products (id, code, name) VALUES
(1, '100', 'Coxinha'),
(2, '108', 'Bauru'),
(3, '2', 'PF'),
(4, '141', 'Cuscus, Arroz e Carne de Sol'),
(5, '142', 'Cuscus Arroz e Bife'),
(6, '145', 'Cuscus Arroz e Frango'),
(7, '145', 'Cuscus, Arroz e Costela'),
(8, '299', 'Cuscus, Arroz e Bode'),
(9, '298', 'Cuscus com Bode'),
(10, '148', 'Cuscus com Frango'),
(11, '407', 'Cuscus com Costela'),
(12, '201', 'Café com Leite'),
(13, '203', 'Café Grande'),
(14, '221', 'Empada'),
(15, '222', 'Tartalete'),
(16, '111', 'Esfirra'),
(17, '103', 'Pastel'),
(18, '101', 'Coxão'),
(19, '50', 'Coca Lata'),
(20, '49', 'Fanta Lata'),
(21, '46', 'Kuat Lata'),
(22, '48', 'Fanta Uva Lata'),
(23, '57', 'Coca de 500ml'),
(24, '61', 'Coca Pet de 1 LT'),
(25, '68', 'Coca LS de 1 Litro'),
(26, '67', 'Antarctica LS de 1 Litro'),
(27, '65', 'Fanta LS de 1 Litro'),
(28, '223', 'Coca Mini'),
(29, '99', 'Coco'),
(30, '93', 'Golito'),
(31, '202', 'Café c. Leite G'),
(32, '219', 'Panqueca'),
(33, '262', 'Enroladinho'),
(34, '106', 'Torta'),
(35, '261', 'Bolo'),
(36, '205', 'Copo de Leite'),
(37, '79', 'Água Mineral (P)'),
(38, '80', 'Água Mineral (G)'),
(39, '81', 'Água Mineral com Gás'),
(40, '91', 'Doce'),
(41, '74', 'Cajuína'),
(42, '116', 'Sopa de Costela'),
(43, '122', 'Caldo de Costela'),
(44, '124', 'Caldo de Frango'),
(45, '123', 'Meio Caldo de Costela'),
(46, '126', 'Caldo de Carne Moída'),
(47, '53', 'Coca KS'),
(48, '47', 'Sprite Lata'),
(49, '78', 'Kuat 2 LT'),
(50, '59', 'Kuat Pet 500ml'),
(51, '58', 'Fanta Pet 500ml'),
(52, '51', 'Coca Lata Zero'),
(53, '52', 'Tônica (Schweppes)'),
(54, '713', 'Sprite Fresh'),
(55, '54', 'Fanta KS'),
(56, '55', 'Kuat KS'),
(57, '127', 'Meio Caldo de Carne Moída'),
(58, '125', 'Meio Caldo de Frango'),
(59, '272', 'Meio Caldo de Mocotó'),
(60, '271', 'Caldo de Mocotó'),
(61, '199', 'Toddynho'),
(62, '132', 'Pão c. Ovo'),
(156, '156', 'Porção de Macaxeira'),
(157, '157', 'Porção de Macarrão'),
(376, '376', 'Monster Energy'),
(88, '88', 'Red Bull'),
(408, '408', 'Megaton (P)'),
(86, '86', 'Power Bull 1 Litro'),
(90, '90', 'Guaraton'),
(409, '409', 'Megaton (G)'),
(110, '110', 'Pão de Queijo'),
(112, '112', 'Pão c. Queijo Coalho'),
(113, '113', 'Pão c. Queijo Manteiga'),
(258, '258', 'Pão Assado'),
(216, '216', 'Pão'),
(114, '114', 'Misto'),
(115, '115', 'Cachorro Quente'),
(130, '130', 'Pão c. Costela'),
(128, '128', 'Pão c. Bife'),
(129, '129', 'Pão c. Sol'),
(117, '117', 'Ovo'),
(170, '170', 'Queijo'),
(82, '82', 'Iogurte (G)'),
(84, '84', 'Iogurte (M)'),
(85, '85', 'Iogurte (P)'),
(172, '172', 'Suco de Caju'),
(267, '267', 'Suco de Acerola'),
(173, '173', 'Suco de Maracujá'),
(182, '182', 'Fandangos Presunto'),
(181, '181', 'Fandangos Queijo'),
(183, '183', 'Doritos'),
(179, '179', 'Cheetos Requeijão'),
(178, '178', 'Cheetos Lua'),
(180, '180', 'Cheetos Bola'),
(187, '187', 'Cebolitos'),
(190, '190', 'Batata Original 57G'),
(189, '189', 'Batata Churrasco 57G'),
(188, '188', 'Batata Cebola e Salsa 57G'),
(95, '95', 'Del Valle Citrus'),
(93, '93', 'Del Valle Uva'),
(405, '405', 'Macaxeira c. Sol'),
(135, '135', 'Macaxeira - Bife'),
(136, '136', 'Macaxeira c. Costela'),
(137, '137', 'Macaxeira c. Frango'),
(300, '300', 'Macaxeira c. Bode'),
(118, '118', 'Sopa de Carne Moída'),
(119, '119', 'Meia Sopa Costela'),
(120, '120', 'Meia Sopa Frango'),
(121, '121', 'Meia Sopa c. Moída'),
(174, '174', 'Suco de Laranja'),
(175, '175', 'Jarra de Laranja'),
(155, '155', 'Porção de Cuscuz'),
(153, '153', 'Porção de Arroz'),
(154, '154', 'Porção de Feijão'),
(161, '161', 'Porção de Costela'),
(160, '160', 'Porção de Frango'),
(159, '159', 'Porção de Bife'),
(158, '158', 'Porção de Sol'),
(200, '117', 'Sopa de Frango')
ON CONFLICT (id) DO UPDATE 
SET code = EXCLUDED.code, 
    name = EXCLUDED.name,
    updated_at = NOW();
    
-- Nota: Alguns produtos podem ter o mesmo código (ex: 145, 93, 117)
-- Isso é intencional da lanchonete, por isso removemos UNIQUE do campo code

-- Habilitar RLS (Row Level Security) - opcional, mas recomendado para produção
ALTER TABLE flashcard_products ENABLE ROW LEVEL SECURITY;

-- Política para permitir leitura pública (anônima)
CREATE POLICY "Allow public read access" ON flashcard_products
  FOR SELECT
  USING (true);

